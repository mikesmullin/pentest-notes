# disable the host key check and its interactive prompt
ssh -o"UserKnownHostsFile=/dev/null" -o "StrictHostKeyChecking=no"

# bypass interactive pw prompt
sshkeys


## ~/.authorized_keys
# wow, did you know you can add public keys WITH restrictions?
# just prefix these before the key on the same line...
#
# only allow access from specific ip
from="1.2.3.4",
# ignore user cmds
command="echo 'hi'", 
no-agent-forwarding,
no-X11-forwarding,
# block pty alloc
no-pty


ssh -V


# ---
# Forwarding

# (on my Kali machine listen on 8081, get it from 172.24.0.2:80)
$ ssh -R 8081:172.24.0.2:80 
# <KALI 10.1.1.1>:8081<------------<REMOTE 172.24.0.2>:80
# Now you can access 172.24.0.2:80, which you didn't have direct access to


# (on your machine listen on 8083, send it to my Kali machine on 8084)
$ ssh -L 8083:127.0.0.1:8084 
# <KALI 127.0.0.1>:8084<------------<REMOTE 10.1.1.230>:8083<------------<REMOTE X.X.X.X>:XXXX
# run nc on port 8084, and if 10.1.1.230:8083 receives a reverse shell, you will get it


# see also: plink.md, `chisel` tool


# ---
# Dynamic SOCKS proxy
# DYNAMIC "port to any" options:
# - setup `proxychains` with `socks5` on `127.0.0.1:1080`, or
# - set up socks5 proxy on `firefox`
# REMEMBER: to scan via proxy, 
#           `nmap` should use -Pn -sT 
#           `metasploit` should use tcp scanner

# SSH For Linux
$ ssh -D1080 ...


# OpenSSH 7.6+ supports reverse dynamic proxy
ssh -R 8080:localhost:80 public.example.com
# `-R [bind_address:]port:host:hostport`
# This allows anyone on the remote server to connect to TCP port 8080 on the remote server. The connection will then be tunneled back to the client host, and the client then makes a TCP connection to port 80 on localhost. Any other host name or IP address could be used instead of localhost to specify the host to connect to.
#
# This particular example would be useful for giving someone on the outside access to an internal web server. Or exposing an internal web application to the public Internet. This could be done by an employee working from home, or by an attacker.




# ssh -L [bind_address:]port:host:hostport
#   local client fwds to remote
# ssh -R [bind_address:]port:host:hostport
#   remote host fwds to local